<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="nav nav-tabs" id="nav-tab" role="tablist">
    <a class="nav-item nav-link" *ngFor="let collection of collectionKeys"
      [class.active]="collection === selectedCollection" (click)="selectCollection(collection)">
      {{collection}}
    </a>
  </div>
</nav>
<div class="tab-content scrollspy-example" id="nav-tabContent" data-bs-spy="scroll" data-bs-target="#nav-tab"
  data-bs-offset="0" tabindex="0">
  <div class="tab-pane fade show active" role="tabpanel">
    <h4>{{selectedCollection}}</h4>
    <table class="table table-striped table-hover table-responsive">
      <thead class="table-dark">
        <tr>
          <th>Name</th>
          <ng-container *ngFor="let key of getKeys(collections[selectedCollection]?.[0] ?? {})">
            <th *ngIf="key !== 'url' && key !== 'Int32' && key !== 'name'">{{ key }}</th>
          </ng-container>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of getPaginatedItems(); let i = index" [ngClass]="{'long-text-row': isLongText(item.name)}">
          <td>{{ item.name }}</td>
          <ng-container *ngFor="let key of getKeys(item); let k = index">
            <td *ngIf="key !== 'url' && key !== 'Int32' && key !== 'name'">
              <div *ngIf="isString($any(item[key])) && isLongText($any(item[key]))">
                <button (click)="toggleTextVisibility(i * 1000 + k)" class="btn btn-outline-secondary btn-sm">
                  <img [src]="textVisibility[i * 1000 + k] ? 'assets/imgs/icons/collapnd-btn.png' : 'assets/imgs/icons/collapnd-btn.png'" alt="Toggle">
                </button>
                <div [ngbCollapse]="!textVisibility[i * 1000 + k]">
                  <span>{{ $any(item[key]) }}</span>
                </div>
              </div>
              <div *ngIf="!isString($any(item[key])) || !isLongText($any(item[key]))">
                <span>{{ $any(item[key]) }}</span>
              </div>
            </td>
          </ng-container>
        </tr>
      </tbody>
    </table>
    <div *ngIf="!collections[selectedCollection] || collections[selectedCollection].length === 0">
      No data available.
    </div>
    <ngb-pagination *ngIf="collections[selectedCollection]" [(page)]="page" [pageSize]="pageSize"
      [collectionSize]="collections[selectedCollection].length || 0" [maxSize]="maxPages" [rotate]="true"
      [ellipses]="true" class="pagination"></ngb-pagination>
  </div>
</div>