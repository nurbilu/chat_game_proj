<div class="chrcter-creation-container container">
  <div class="text-frame">
    <h2>Welcome to Character Creation </h2>
    <p>Hello there, traveler! My name is DeMe, and I'll be your chat-like adventure guide and Game Manager. What combat
      style do you desire? There are many classes and races to choose from in DnD 5e. create a prompt to paste at the
      chat!
      <br>
      use this Text Editor to create your character creation prompt , also use the chat to ask me questions about your
      character , dont
      forget to use our library and the accordions
      to see the classes and races descriptions and spells:
    </p>

    <div class="text-frame">
      <h3>Character Creation Prompt</h3>
      <div class="text-editor-container">
        <st-editor [(ngModel)]="characterPrompt" [Config]="config"></st-editor>
      </div>
      <button (click)="sendMessage()">Send</button>
      <button (click)="saveDraft()">Save Draft</button>
      <button (click)="pasteDraft()">Paste Draft</button>
    </div>

    <div class="text-frame chat-container">
      <h3>Character Creation Advisor</h3>
      <div *ngFor="let message of chatMessages" [ngClass]="message.role" class="chat-bubble">
        {{ message.content }}
      </div>
      <div class="input-container">
        <input type="text" [(ngModel)]="userMessage" placeholder="Type your message here" required
          (keydown.enter)="sendChatMessage()">
        <button (click)="sendChatMessage()" class="btn btn-success">Send</button>
      </div>
    </div>

    <div class="text-frame">
      <h3>Spells for Each Class</h3>
      <div *ngFor="let classItem of classes">
        <ng-container *ngIf="!['Barbarian', 'Fighter', 'Monk', 'Rogue'].includes(classItem.name)">
          <h4>{{ classItem?.name }}</h4>
          <select *ngIf="classItem.spells.length > 0" class="form-select">
            <option *ngFor="let spell of classItem?.spells" [value]="spell?.name">{{ spell?.name }}</option>
          </select>
          <p *ngIf="classItem?.spells?.length === 0" class="no-spells">
            No spells available for {{ classItem?.name }}.
          </p>
        </ng-container>
      </div>
      <div>
        <h3>Non-Spell Classes</h3>
        <p>No spells available for these classes!</p>
        <ul>
          <li>Barbarian</li>
          <li>Fighter</li>
          <li>Monk</li>
          <li>Rogue</li>
        </ul>
      </div>
      <p>
        For more information on spells, visit 
        <a href="https://rpgbot.net/dnd5/characters/spells/" target="_blank">RPGBot</a>.
      </p>
    </div>

    <div class="text-frame">
      <h3>Classes Description</h3>
      <div ngbAccordion>
        <div ngbAccordionItem *ngFor="let class of classes">
          <h2 ngbAccordionHeader>
            <button ngbAccordionButton>{{ class.name }}</button>
          </h2>
          <div ngbAccordionCollapse>
            <div ngbAccordionBody>
              <p>{{ class.description }}</p>
              <div *ngIf="spellSlotLevels[class.name]">
                <h5>Spell Slot Levels:</h5>
                <div class="table-responsive">
                  <table class="table table-striped table-bordered">
                    <thead>
                      <tr>
                        <th scope="col">Character Level</th>
                        <th scope="col">Spell Slots</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let level of levels">
                        <td>Character Level {{ level }}</td>
                        <td>
                          <table class="table table-sm">
                            <tbody>
                              <tr *ngFor="let slot of getSpellSlotLevels(class.name, level)">
                                <td>{{ slot.level }}</td>
                                <td>{{ slot.slots }}</td>
                              </tr>
                            </tbody>
                          </table>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div>
        <p>
          For more information on classes, visit
          <a href="https://rpgbot.net/dnd5/characters/classes/" target="_blank">RPGBot</a>.
        </p>
      </div>
    </div>
    <div class="text-frame">
      <h3>Race Descriptions</h3>
      <div ngbAccordion>
        <div ngbAccordionItem *ngFor="let race of races">
          <h2 ngbAccordionHeader>
            <button ngbAccordionButton>{{ race.name }}</button>
          </h2>
          <div ngbAccordionCollapse>
            <div ngbAccordionBody>
              <p><strong>Alignment:</strong> {{ race.alignment }}</p>
              <p><strong>Age:</strong> {{ race.age }}</p>
              <p><strong>Size:</strong> {{ race.size_description }}</p>
              <p><strong>Languages:</strong> {{ race.language_desc }}</p>
            </div>
          </div>
        </div>
      </div>
      <div>
        <p>
          For more information on races, visit
          <a href="https://rpgbot.net/dnd5/characters/races/" target="_blank">RPGBot</a>.
        </p>
      </div>
    </div>

    <ng-template #successTemplate>
      <div>Character created successfully!</div>
    </ng-template>
    <ng-template #errorTemplate>
      <div>Failed to create character</div>
    </ng-template>
    <ng-template #fillFieldsTemplate>
      <div>Please fill all fields</div>
    </ng-template>
  </div>
</div>