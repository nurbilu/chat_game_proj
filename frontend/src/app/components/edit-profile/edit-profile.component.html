<div class="edit-profile-header">
  <h2 style="text-align: center;">Edit Profile</h2>
  <button class="close-btn" (click)="closeEditProfile()" ngbPopover="Click to close the edit profile form" triggers="mouseenter:mouseleave">&times;</button>
</div>

<form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="zoom-in" id="editProfileForm">
  <div>
    <label for="first_name">First Name:</label>
    <input type="text" id="first_name" formControlName="first_name" ngbPopover="Update your new first name" popoverTitle="First Name" triggers="mouseenter:mouseleave">
    <div *ngIf="profileForm.get('first_name')!.invalid && profileForm.get('first_name')!.touched">
      <small *ngIf="profileForm.get('first_name')!.errors?.['required']">First Name is required</small>
    </div>
  </div>
  <div>
    <label for="last_name">Last Name:</label>
    <input type="text" id="last_name" formControlName="last_name" ngbPopover="Update your new last name" popoverTitle="Last Name" triggers="mouseenter:mouseleave">
    <div *ngIf="profileForm.get('last_name')!.invalid && profileForm.get('last_name')!.touched">
      <small *ngIf="profileForm.get('last_name')!.errors?.['required']">Last Name is required</small>
    </div>
  </div>
  <div>
    <label for="email">Email:</label>
    <input type="email" id="email" formControlName="email" ngbPopover="Update your new email address" popoverTitle="Email" triggers="mouseenter:mouseleave">
    <div *ngIf="profileForm.get('email')!.invalid && profileForm.get('email')!.touched">
      <small *ngIf="profileForm.get('email')!.errors?.['required']">Email is required</small>
      <small *ngIf="profileForm.get('email')!.errors?.['email']">Invalid email format</small>
    </div>
  </div>
  <div>
    <label for="address">Address:</label>
    <input type="text" id="address" formControlName="address" ngbPopover="Update your new address" popoverTitle="Address" triggers="mouseenter:mouseleave">
  </div>
  <div>
    <label for="birthdate">Birthdate:</label>
    <input type="date" id="birthdate" formControlName="birthdate" ngbPopover="Update your birthdate" popoverTitle="Birthdate" triggers="mouseenter:mouseleave">
  </div>
  <div>
    <label for="profile_picture">Profile Picture:</label>
    <input type="file" id="profile_picture" (change)="onFileSelected($event)" ngbPopover="Upload your New profile picture" popoverTitle="Profile Picture" triggers="mouseenter:mouseleave">
  </div>
  <button type="submit" [disabled]="profileForm.invalid" ngbPopover="Click to save your changes" triggers="mouseenter:mouseleave">Save</button>
</form>

<ng-template #successTemplate>
  <div>Profile updated successfully</div>
</ng-template>
<ng-template #errorTemplate>
  <div>Failed to update profile</div>
</ng-template>
